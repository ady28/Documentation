### Ubuntu
#Download tar
curl -L https://github.com/prometheus/prometheus/releases/download/v2.32.1/prometheus-2.32.1.linux-amd64.tar.gz -x "http://192.168.1.254:80" --output prometheus.tar.gz
#Unpack archive
tar xvfz prometheus.tar.gz
cd prometheus-2.32.1.linux-amd64
#Get help on prometheus
./prometheus --help
#Prometheus can be started with a config file. A file named prometheus.yml is provided as a sample
#Start prometheus
./prometheus --config.file=prometheus.yml
#Navigate to the IP address of the serve with port 9090
#Prometheus now monitors itself
#Go to Graph and enter the following expression to get data about it: promhttp_metric_handler_requests_total
#Try another expression: promhttp_metric_handler_requests_total{code="200"}
#You can count time series
count(promhttp_metric_handler_requests_total)
#Show the values of a metric from the last 30 seconds
go_threads{group="canary"}[30s]
#Show the value of a metric from a minute ago
go_threads{group="canary"} offset 1m
#Send queries via API
Invoke-RestMethod -Uri 'http://192.168.1.250:9090/api/v1/query?query=go_info'

#You can run prometheus so that it reloads config and rules files when calling a POST method:
./prometheus --config.file=prometheus.yml --web.enable-lifecycle
#Now you can use the following command to reload configuration
Invoke-RestMethod -Uri 'http://192.168.1.250:9090/-/reload' -Method Post

#Health check
Invoke-RestMethod -Uri 'http://192.168.1.250:9090/-/healthy'
#Readines check
Invoke-RestMethod -Uri 'http://192.168.1.250:9090/-/ready'

#Install as service(files are considered already downloaded and extracted)
useradd --shell /bin/false prometheus
passwd prometheus
mkdir /etc/prometheus
mkdir /var/lib/prometheus
chown prometheus:prometheus /var/lib/prometheus
mv console* /etc/prometheus
mv *.yml /etc/prometheus
chown -R prometheus:prometheus /etc/prometheus
mv prometheus /usr/local/bin
mv promtool /usr/local/bin
chown prometheus:prometheus /usr/local/bin/prom*
mv data /var/lib/prometheus
chown -R prometheus:prometheus /var/lib/prometheus/data
sudo nano /etc/systemd/system/prometheus.service
#write#
[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus --web.enable-lifecycle --config.file /etc/prometheus/prometheus.yml --storage.tsdb.path /var/lib/prometheus/ --web.console.templates=/etc/prometheus/consoles --web.console.libraries=/etc/prometheus/console_libraries

[Install]
WantedBy=multi-user.target
#end#
systemctl start prometheus
systemctl enable prometheus

### Docker
docker run -p 9090:9090 prom/prometheus